<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
     <h:head>
      <h:outputScript library="javax.faces" name="jsf.js" target="head" />
      
     </h:head>
      
    <h:body style="padding:10px">
    
    <h:outputStylesheet name="css/bootstrap.css"/>
    
    	
    	<div class="container">
  <div class="row">
    <div class="col">
    	
    	<h:form styleClass="card card-body">
    	<h3 class="card-title">new person</h3>
    	
    	<div class="form-group">
    	<label>first name</label>
    	<h:inputText value="#{main.person.firstName}" id="aaa" required="true" requiredMessage="a first name has to be entered" styleClass="form-control">
    	<f:ajax event="blur" render="m1" /> 
    	</h:inputText>
		<h:message id="m1" for="aaa" styleClass="alert alert-danger"/>
		</div>
		
		<div class="form-group">
		<label>last name</label>
		<h:inputText value="#{main.person.lastName}" styleClass="form-control"></h:inputText>
		</div>
		
		<div class="form-group">
		<label>age</label>
		<h:inputText value="#{main.person.age}" styleClass="form-control"></h:inputText>
		<h:commandButton value = "add person" type="button" styleClass="btn btn-primary" style="width:130px">
			<f:ajax event="click" execute="@form" render="dtable" listener="#{main.addPerson()}" />
		</h:commandButton>
		</div>
		
    	</h:form>
    	
    	 
    	<h:form styleClass="card card-body">
    	<h3 class="card-title">delete person</h3>
    	<div class="form-group">
    	<label>id</label>
    	<h:inputText value="#{main.person.id}" styleClass="form-control"></h:inputText>
		<h:commandButton value="delete person" styleClass="btn btn-danger" style="width:130px">
		<f:ajax event="click" execute="@form" render="dtable" listener="#{main.deletePerson()}"/>
		</h:commandButton>
		</div>
		</h:form>
		
		
		</div>
		<div class="col">

		
    	<div class="card card-body">
    	<h3 class="card-title">persons</h3>

<ui:remove>
<ul class="list-group">
    		<ui:repeat value="#{main.personList}" var="p" id="dtable">
    		<li>
            	<h:outputLabel value="#{p.id}"></h:outputLabel>
            	<h:outputLabel value="#{p.firstName}"></h:outputLabel>
            	<h:outputLabel value="#{p.lastName}"></h:outputLabel>
            	<h:outputLabel value="#{p.age}"></h:outputLabel>
        	</li>
        	</ui:repeat>
        	</ul>
        	</ui:remove>

			<h:dataTable value="#{main.personList}" var="p" id="dtable" styleClass="table table-striped">
    		
    			<h:column>
    				<!-- column header -->
    				<f:facet name="header">id</f:facet>
    				<!-- row record -->
    				#{p.id}
    			</h:column>

    			<h:column>
    				<f:facet name="header">first name</f:facet>
    				#{p.firstName}
    			</h:column>

    			<h:column>
    				<f:facet name="header">last name</f:facet>
    				#{p.lastName}
    			</h:column>

    			<h:column>
    				<f:facet name="header">age</f:facet>
    				#{p.age}
    			</h:column>
</h:dataTable>
    		
    		</div>
    		</div>
    		</div>
    		</div>

    </h:body>
</html>